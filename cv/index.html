<!DOCTYPE html>
<html>
<head>
	<title>Juan Eduardo Casta√±o Nestares - Curriculum Vitae</title>
	<meta name="robots" content="noindex,nofollow">
	<link href="styles.css" rel="stylesheet" type="text/css"></link>
</head>
<body>
<script src="./draw.js"></script>
<script type="module">
	function err(err) {
		alert(err)
	}

	function show(rawObj) {
		const obj=rawObj.cv
		var d=document.getElementsByTagName("body")[0]

		var h1=document.createElement("h1")
		h1.appendChild(document.createTextNode(obj.name))
		d.appendChild(h1)

		/* removing the image ... just because
		var img=document.createElement("img")
		const src=document.createAttribute("src")
		src.value=obj.image
		img.setAttributeNode(src)
		d.appendChild(img)
		*/

		for (let i=0,j=obj.items.length; i<j; i++) {
			deploy(d,obj.items[i],2)
		}
	}

	const doAjax = async () => {
		const response = await fetch("data.json",{
			method: 'GET',
			headers: {
				'Accept': 'application/json'
			}
		});
		if (response.ok) {
			const jsonValue = await response.json();
			return Promise.resolve(jsonValue);
		} else {
			return Promise.reject("*** it didn't work ***");
  		}
	};

	doAjax().then(show).catch(err)

</script>
</body>
</html>

