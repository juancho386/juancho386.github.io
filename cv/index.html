<!DOCTYPE html>
<html>
<head>
	<title>Juan Eduardo Casta√±o Nestares - Curriculum Vitae</title>
</head>
<body>
<script type="module">
	function err() {
		alert(err)
	}

	function show(obj) {
		document.cv = obj.data
		for (let i=0,j=obj.length; i<j; i++) {
			console.log(obj[i])
		}
	}

	const doAjax = async () => {
		const response = await fetch("data.json",{
			method: 'GET',
			headers: {
				'Accept': 'application/json'
			}
		});
		if (response.ok) {
			const jsonValue = await response.json();
			return Promise.resolve(jsonValue);
		} else {
			return Promise.reject("*** it didn't work ***");
  		}
	};

	doAjax().then(show).catch(err)

</script>
</body>
</html>
